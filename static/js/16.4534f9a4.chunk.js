(this["webpackJsonptomb.finance"]=this["webpackJsonptomb.finance"]||[]).push([[16],{1703:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return re}));var a,r,c,i,o,u,l,s,m,f,d,p=t(2),b=t.n(p),h=t(16),v=t(35),O=t(27),g=t(0),x=t.n(g),j=t(267),E=t(991),w=t.n(E),y=t(23),S=t(49),T=t(55),k=t(885),N=t(947),A=t(831),P=t(813),C=t(817),D=t(905),z=t(97),R=t(30),B=t(32),M=t(857),V=t(61),U=function(){var e=Object(z.a)(),n=Object(M.a)();return{onSwapTShare:Object(g.useCallback)((function(t){var a=Object(V.parseUnits)(t,18);n(e.swapTBondToTShare(a),"Swap ".concat(t," TBond to TShare"))}),[e,n])}},I=t(877),_=t(845),F=function(e){var n=Object(g.useState)(),t=Object(v.a)(n,2),a=t[0],r=t[1],c=Object(_.a)().fastRefresh,i=Object(z.a)();return Object(g.useEffect)((function(){function n(){return(n=Object(h.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!i.myAccount){n.next=7;break}return n.t0=r,n.next=5,i.getTShareSwapperStat(e);case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:n.next=12;break;case 9:n.prev=9,n.t2=n.catch(0),console.error(n.t2);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[r,i,c,e]),a},W=t(866),G=t(393),K=t(281),H=t(178),J=Object(y.c)(a||(a=Object(O.a)(["\n  body {\n    background: url(",") no-repeat !important;\n    background-size: cover !important;\n  }\n"])),w.a);function L(e){return!isNaN(parseFloat(e))&&isFinite(e)}var q=y.d.div(r||(r=Object(O.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]))),Q=y.d.div(c||(c=Object(O.a)(["\n  display: flex;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n"]))),X=y.d.div(i||(i=Object(O.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]))),Y=y.d.div(o||(o=Object(O.a)(["\n  margin-left: auto;\n  margin-right: auto;\n"]))),Z=y.d.div(u||(u=Object(O.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 20px;\n  font-weight: 700;\n  height: 64px;\n  justify-content: center;\n  margin-top: ","px;\n"])),(function(e){return-e.theme.spacing[3]})),$=y.d.div(l||(l=Object(O.a)(["\n  background-color: ",";\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.theme.spacing[2]})),ee=y.d.div(s||(s=Object(O.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[5]})),ne=y.d.div(m||(m=Object(O.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n"]))),te=y.d.div(f||(f=Object(O.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),ae=y.d.span(d||(d=Object(O.a)([""]))),re=function(){var e=Object(S.f)().path,n=Object(T.b)().account,t=Object(z.a)(),a=Object(g.useState)(""),r=Object(v.a)(a,2),c=r[0],i=r[1],o=Object(g.useState)(""),u=Object(v.a)(o,2),l=u[0],s=u[1],m=Object(I.b)(t.TBOND,t.contracts.TShareSwapper.address),f=Object(v.a)(m,2),d=f[0],p=f[1],O=U().onSwapTShare,E=F(n),w=Object(g.useMemo)((function(){return E?Number(E.tshareBalance):0}),[E]),y=Object(g.useMemo)((function(){return E?Number(E.tbondBalance):0}),[E]),M=function(){var e=Object(h.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.currentTarget.value){e.next=4;break}return i(""),s(""),e.abrupt("return");case 4:if(L(n.currentTarget.value)){e.next=6;break}return e.abrupt("return");case 6:return i(n.currentTarget.value),e.next=9,t.estimateAmountOfTShare(n.currentTarget.value);case 9:a=e.sent,s(a);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=Object(h.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(String(y)),e.next=3,t.estimateAmountOfTShare(String(y));case 3:n=e.sent,s(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(b.a.mark((function e(){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(String(w)),e.next=3,t.getTShareSwapperStat(n);case 3:a=e.sent.rateTSharePerTomb,r=B.a.from(10).pow(30).div(B.a.from(a)).mul(1e6*Number(w)),i(Object(R.a)(r,18,6));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(h.a)(b.a.mark((function e(a){var r,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(r=a.currentTarget.value)){e.next=5;break}return s(""),i(""),e.abrupt("return");case 5:if(L(r)){e.next=7;break}return e.abrupt("return");case 7:return s(r),e.next=10,t.getTShareSwapperStat(n);case 10:c=e.sent.rateTSharePerTomb,o=B.a.from(10).pow(30).div(B.a.from(c)).mul(1e6*Number(r)),i(Object(R.a)(o,18,6));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return x.a.createElement(S.c,null,x.a.createElement(j.a,null,x.a.createElement(J,null),n?x.a.createElement(x.a.Fragment,null,x.a.createElement(S.a,{exact:!0,path:e},x.a.createElement(N.a,{icon:"\ud83c\udfe6",title:"TBond -> TShare Swap",subtitle:"Swap TBond to TShare"})),x.a.createElement(A.a,{mt:5},x.a.createElement(P.a,{container:!0,justify:"center",spacing:6},x.a.createElement(q,null,x.a.createElement(Q,null,x.a.createElement(X,null,x.a.createElement(G.a,null,x.a.createElement(K.a,null,x.a.createElement(te,null,x.a.createElement(Z,null,"TBonds"),x.a.createElement(ee,null,x.a.createElement(ne,null,x.a.createElement($,null,x.a.createElement(H.a,{symbol:t.TBOND.symbol,size:54})))),x.a.createElement(P.a,{item:!0,xs:12},x.a.createElement(W.a,{onSelectMax:V,onChange:M,value:c,max:y,symbol:"TBond"})),x.a.createElement(ae,null,"".concat(y," TBOND Available in Wallet")))))),x.a.createElement(D.a,{size:"lg"}),x.a.createElement(X,null,x.a.createElement(G.a,null,x.a.createElement(K.a,null,x.a.createElement(te,null,x.a.createElement(Z,null,"TShare"),x.a.createElement(ee,null,x.a.createElement(ne,null,x.a.createElement($,null,x.a.createElement(H.a,{symbol:t.TSHARE.symbol,size:54})))),x.a.createElement(P.a,{item:!0,xs:12},x.a.createElement(W.a,{onSelectMax:_,onChange:re,value:l,max:w,symbol:"TShare"})),x.a.createElement(ae,null,"".concat(w," TSHARE Available in Swapper")))))))))),x.a.createElement(A.a,{mt:5},x.a.createElement(P.a,{container:!0,justify:"center"},x.a.createElement(P.a,{item:!0,xs:8},x.a.createElement(G.a,null,x.a.createElement(K.a,null,x.a.createElement(Y,null,d!==I.a.APPROVED?x.a.createElement(C.a,{disabled:d!==I.a.NOT_APPROVED,color:"primary",variant:"contained",onClick:p,size:"medium"},"Approve TBOND"):x.a.createElement(C.a,{color:"primary",variant:"contained",onClick:function(){return O(c.toString())},size:"medium"},"Swap")))))))):x.a.createElement(k.a,null)))}},845:function(e,n,t){"use strict";var a=t(0),r=t(271);n.a=function(){var e=Object(a.useContext)(r.a);return{fastRefresh:e.fast,slowRefresh:e.slow}}},853:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return l}));var a=t(0),r=t(60),c=t(55),i=t(104);function o(){var e=Object(c.b)(),n=e.chainId,t=e.account,o=Object(r.b)();return Object(a.useCallback)((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.summary,c=a.approval;if(t&&n){var u=e.hash;if(!u)throw Error("No transaction hash found.");o(Object(i.a)({hash:u,from:t,chainId:n,approval:c,summary:r}))}}),[o,n,t])}function u(){var e,n=Object(c.b)().chainId,t=Object(r.c)((function(e){return e.transactions}));return n&&null!==(e=t[n])&&void 0!==e?e:{}}function l(e,n){var t=u();return Object(a.useMemo)((function(){return"string"===typeof e&&"string"===typeof n&&Object.keys(t).some((function(a){var r=t[a];if(!r)return!1;if(r.receipt)return!1;var c=r.approval;return!!c&&(c.spender===n&&c.tokenAddress===e&&function(e){return(new Date).getTime()-e.addedTime<864e5}(r))}))}),[t,n,e])}},857:function(e,n,t){"use strict";var a=t(0),r=t(853),c=t(119);n.a=function(){var e=Object(r.b)(),n=Object(c.b)();return Object(a.useCallback)((function(t,a){t.then((function(n){return e(n,{summary:a})})).catch((function(e){if(!e.message.includes("User denied")){var t="Unable to ".concat(a[0].toLowerCase()).concat(a.slice(1));console.error("".concat(t,": ").concat(e.message||e.stack)),n({error:{message:t,stack:e.message||e.stack}})}}))}),[n,e])}},866:function(e,n,t){"use strict";t.d(n,"a",(function(){return j}));var a,r,c,i,o,u,l=t(27),s=t(0),m=t.n(s),f=t(23),d=t(817),p=f.d.div(a||(a=Object(l.a)(["\n  align-items: center;\n  background-color: ",";\n  border-radius: ","px;\n  display: flex;\n  padding: 0 ","px;\n"])),(function(e){return e.theme.color.grey[200]}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.spacing[3]})),b=f.d.input(r||(r=Object(l.a)(["\n  background: none;\n  border: 0;\n  color: ",";\n  font-size: 18px;\n  flex: 1;\n  height: 56px;\n  margin: 0;\n  padding: 0;\n  outline: none;\n"])),(function(e){return e.theme.color.grey[600]})),h=function(e){var n=e.endAdornment,t=e.onChange,a=e.placeholder,r=e.startAdornment,c=e.value;return m.a.createElement(p,null,!!r&&r,m.a.createElement(b,{placeholder:a,value:c,onChange:t}),!!n&&n)},v=f.d.div(c||(c=Object(l.a)([""]))),O=f.d.div(i||(i=Object(l.a)(["\n  width: ","px;\n"])),(function(e){return e.theme.spacing[3]})),g=f.d.div(o||(o=Object(l.a)(["\n  align-items: center;\n  display: flex;\n"]))),x=f.d.div(u||(u=Object(l.a)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  font-size: 14px;\n  font-weight: 700;\n  height: 44px;\n  justify-content: flex-end;\n"])),(function(e){return e.theme.color.grey[400]})),j=function(e){var n=e.max,t=e.symbol,a=e.onChange,r=e.onSelectMax,c=e.value;return m.a.createElement(v,null,m.a.createElement(x,null,n.toLocaleString()," ",t," Available"),m.a.createElement(h,{endAdornment:m.a.createElement(g,null,m.a.createElement(O,null),m.a.createElement("div",null,m.a.createElement(d.a,{size:"small",color:"primary",variant:"contained",onClick:r},"Max"))),onChange:a,placeholder:"0",value:c}))}},867:function(e,n,t){"use strict";var a=t(2),r=t.n(a),c=t(16),i=t(35),o=t(0),u=t(55);n.a=function(e,n,t){var a=Object(o.useState)(null),l=Object(i.a)(a,2),s=l[0],m=l[1],f=Object(u.b)().account,d=Object(o.useCallback)(Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.allowance(f,n);case 2:a=t.sent,m(a);case 4:case"end":return t.stop()}}),t)}))),[f,n,e]);return Object(o.useEffect)((function(){f&&n&&e&&d().catch((function(e){return console.error("Failed to fetch allowance: ".concat(e.stack))}))}),[f,n,e,t,d]),s}},877:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var a,r=t(2),c=t.n(r),i=t(16),o=t(98),u=t(32),l=t(0),s=t(853),m=t(867),f=o.a.constants.MaxUint256,d=u.a.from("1000000000000000000000000");!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_APPROVED=1]="NOT_APPROVED",e[e.PENDING=2]="PENDING",e[e.APPROVED=3]="APPROVED"}(a||(a={})),n.b=function(e,n){var t=Object(s.a)(e.address,n),r=Object(m.a)(e,n,t),o=Object(l.useMemo)((function(){return r?r.lt(d)?t?a.PENDING:a.NOT_APPROVED:a.APPROVED:a.UNKNOWN}),[r,t]),u=Object(s.b)(),p=Object(l.useCallback)(Object(i.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o===a.NOT_APPROVED){t.next=3;break}return console.error("approve was called unnecessarily"),t.abrupt("return");case 3:return t.next=5,e.approve(n,f);case 5:r=t.sent,u(r,{summary:"Approve ".concat(e.symbol),approval:{tokenAddress:e.address,spender:n}});case 7:case"end":return t.stop()}}),t)}))),[o,e,n,u]);return[o,p]}},885:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(0),r=t.n(a),c=t(831),i=t(214),o=function(){return r.a.createElement(c.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(i.a,null))}},905:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var a,r=t(27),c=t(0),i=t.n(c),o=t(23),u=o.d.div(a||(a=Object(r.a)(["\n  height: ","px;\n  width: ","px;\n"])),(function(e){return e.size}),(function(e){return e.size})),l=function(e){var n,t=e.size,a=void 0===t?"md":t,r=Object(c.useContext)(o.a).spacing;switch(a){case"lg":n=r[6];break;case"sm":n=r[2];break;case"md":default:n=r[4]}return i.a.createElement(u,{size:n})}},947:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var a,r,c,i=t(27),o=t(0),u=t.n(o),l=t(23),s=l.d.div(a||(a=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ","px;\n  padding-top: ","px;\n  max-width: 512px;\n  width: 100%;\n  margin: 0 auto;\n"])),(function(e){return e.theme.spacing[6]}),(function(e){return e.theme.spacing[6]})),m=l.d.h1(r||(r=Object(i.a)(["\n  color: ",";\n  font-size: 36px;\n  font-weight: 700;\n  margin: 0;\n  padding: 0;\n"])),(function(e){return e.theme.color.grey[100]})),f=l.d.h3(c||(c=Object(i.a)(["\n  color: ",";\n  font-size: 18px;\n  font-weight: 400;\n  margin: 0;\n  padding: 0;\n  text-align: center;\n"])),(function(e){return e.theme.color.grey[400]})),d=function(e){e.icon;var n=e.subtitle,t=e.title;return u.a.createElement(s,null,u.a.createElement(m,null,t),u.a.createElement(f,null,n))}},991:function(e,n,t){e.exports=t.p+"static/media/pit.268bf984.png"}}]);
//# sourceMappingURL=16.4534f9a4.chunk.js.map